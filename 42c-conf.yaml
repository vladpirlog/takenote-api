openapi: 3.0.0
info:
  description: |
    This is the OpenAPI documentation for the TakeNote REST API. You can find
    out more at [https://app.swaggerhub.com/apis/vladpirlog/takenote-api/1.0.0]
    (https://app.swaggerhub.com/apis/vladpirlog/takenote-api/1.0.0).
  version: "1.0.0"
  title: TakeNote REST API
  termsOfService: "http://swagger.io/terms/"
  contact:
    email: avi.pirlog@gmail.com
  license:
    name: MIT License
    url: "https://opensource.org/licenses/MIT"
servers:
  - description: SwaggerHub API Auto Mocking
    url: https://virtserver.swaggerhub.com/vladpirlog/takenote-api/1.0.0
tags:
  - name: auth
    description: Everything related to the users and authentication
  - name: oauth
    description: OAuth-related endpoints
  - name: 2fa
    description: Endpoints related to two-factor authentication
  - name: notes
    description: Everything related to the users' notes
  - name: notepads
    description: Everything related to the users' notepads
  - name: collaborators
    description: Other users with the ability to view or edit some user's note
  - name: attachments
    description: Images or audio files attached to a note; may have a title and a description
  - name: tags
    description: Words used for grouping notes around a theme
  - name: password
    description: Password-related operations
  - name: comments
    description: Comment-related operations
paths:
  /:
    get:
      summary: Get server status
      responses:
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "200":
          description: Server is ok
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResponseBody"
  /auth/me:
    get:
      tags:
        - auth
      summary: Get authenticated user
      operationId: getMe
      security:
        - cookieAccessToken: []
      responses:
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "200":
          description: Authenticated user fetched
          content:
            application/json:
              schema:
                additionalProperties: false
                type: object
                properties:
                  status:
                    type: integer
                    format: int32
                    enum:
                      - 200
                    description: HTTP success status code
                  message:
                    type: string
                    pattern: /^[a-zA-Z0-9_\-.,]*$/
                    maxLength: 1000
                  user:
                    $ref: "#/components/schemas/User"
  /auth/login:
    post:
      tags:
        - auth
      summary: Login
      operationId: login
      responses:
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "202":
          description: Partial authentication successful, but two-factor authentication required for a full authentication
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResponseBody"
        "200":
          description: Authentication successful
          content:
            application/json:
              schema:
                additionalProperties: false
                type: object
                properties:
                  status:
                    type: integer
                    format: int32
                    enum:
                      - 200
                    description: HTTP success status code
                  message:
                    type: string
                    pattern: /^[a-zA-Z0-9_\-.,]*$/
                    maxLength: 1000
                  user:
                    $ref: "#/components/schemas/User"
      requestBody:
        $ref: "#/components/requestBodies/Login"
  /auth/logout:
    post:
      tags:
        - auth
      summary: Logout
      operationId: logout
      security:
        - cookieAccessToken: []
      responses:
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "200":
          description: User logged out
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResponseBody"
  /auth/register:
    post:
      tags:
        - auth
      summary: Register
      operationId: register
      responses:
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "201":
          description: User created successfully
          content:
            application/json:
              schema:
                additionalProperties: false
                type: object
                properties:
                  status:
                    type: integer
                    format: int32
                    enum:
                      - 201
                    description: HTTP success status code
                  message:
                    type: string
                    pattern: /^[a-zA-Z0-9_\-.,]*$/
                    maxLength: 1000
                  user:
                    $ref: "#/components/schemas/User"
      requestBody:
        $ref: "#/components/requestBodies/Register"
  /auth/confirm:
    post:
      tags:
        - auth
        - password
      summary: Confirm email address
      operationId: confirm
      parameters:
        - name: token
          in: query
          description: The token to be used for confirmation
          required: true
          schema:
            type: string
            pattern: /^cnf[a-zA-Z0-9_-]{24}$/
            maxLength: 27
            minLength: 27
      responses:
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "200":
          description: Email address confirmed
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResponseBody"
        "202":
          description: A new confirmation token was sent to the user's email address
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResponseBody"
  /auth/request_confirmation:
    post:
      tags:
        - auth
        - password
      summary: Request a new confirmation token
      operationId: requestConfirmationToken
      security:
        - cookieAccessToken: []
      responses:
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "200":
          description: Confirmation token sent to the user's email address
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResponseBody"
  /auth/reset_password:
    post:
      tags:
        - auth
        - password
      summary: Request reset token using old password
      operationId: resetPassword
      security:
        - cookieAccessToken: []
      responses:
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "200":
          description: Reset token sent
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResponseBody"
      requestBody:
        $ref: "#/components/requestBodies/OldPassword"
  /auth/forgot_password:
    post:
      tags:
        - auth
        - password
      summary: Request reset token using email or username
      operationId: forgotPassword
      responses:
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "200":
          description: Reset token sent
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResponseBody"
      requestBody:
        $ref: "#/components/requestBodies/ForgotPassword"
  /auth/new_password:
    post:
      tags:
        - auth
        - password
      summary: Submit reset token and the new password
      operationId: submitResetToken
      parameters:
        - name: token
          in: query
          description: The token to be checked against the user's reset token
          required: true
          schema:
            type: string
            pattern: /^rst[a-zA-Z0-9_-]{24}$/
            maxLength: 27
            minLength: 27
      responses:
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "200":
          description: Password changed
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResponseBody"
      requestBody:
        $ref: "#/components/requestBodies/NewPassword"
  /auth/check_token:
    get:
      tags:
        - auth
        - password
      summary: Check token for expiration
      operationId: checkToken
      parameters:
        - name: token
          in: query
          description: The token to be checked
          required: true
          schema:
            type: string
            pattern: /^(rst|cnf)[a-zA-Z0-9_-]{24}$/
            maxLength: 27
            minLength: 27
      responses:
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "200":
          description: Reset token valid (not expired)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResponseBody"
  /auth/check_credentials:
    post:
      tags:
        - auth
      summary: Check if the credentials are taken
      operationId: checkCredentials
      responses:
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "200":
          description: Credentials are not taken
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResponseBody"
      requestBody:
        $ref: "#/components/requestBodies/CheckCredentials"
  /auth/delete:
    post:
      tags:
        - auth
      summary: Delete account
      operationId: deleteMe
      security:
        - cookieAccessToken: []
      responses:
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "200":
          description: Account is being deleted
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResponseBody"
      requestBody:
        $ref: "#/components/requestBodies/OldPassword"
  /auth/recover:
    post:
      tags:
        - auth
      summary: Recover account
      operationId: recoverMe
      security:
        - cookieAccessToken: []
      responses:
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "200":
          description: Account is now active
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResponseBody"
  /auth/google:
    get:
      tags:
        - auth
        - oauth
      summary: Login with Google
      operationId: oauthGoogle
      parameters:
        - name: code
          in: query
          description: The authorization code given by Google
          required: true
          schema:
            type: string
            pattern: /^.*$/
      responses:
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "200":
          description: Authenticated user fetched
          content:
            application/json:
              schema:
                additionalProperties: false
                type: object
                properties:
                  status:
                    type: integer
                    format: int32
                    enum:
                      - 200
                    description: HTTP success status code
                  message:
                    type: string
                    pattern: /^[a-zA-Z0-9_\-.,]*$/
                    maxLength: 1000
                  user:
                    $ref: "#/components/schemas/User"
        "201":
          description: User created successfully
          content:
            application/json:
              schema:
                additionalProperties: false
                type: object
                properties:
                  status:
                    type: integer
                    format: int32
                    enum:
                      - 201
                    description: HTTP success status code
                  message:
                    type: string
                    pattern: /^[a-zA-Z0-9_\-.,]*$/
                    maxLength: 1000
                  user:
                    $ref: "#/components/schemas/User"
  /auth/2fa:
    post:
      tags:
        - auth
        - 2fa
      summary: Enable 2fa
      operationId: enable2fa
      security:
        - cookieAccessToken: []
      responses:
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "200":
          description: Image data fetched
          content:
            application/json:
              schema:
                additionalProperties: false
                type: object
                required:
                  - status
                  - message
                  - image
                properties:
                  status:
                    type: integer
                    format: int32
                    enum:
                      - 200
                    description: HTTP success status code
                  message:
                    type: string
                    pattern: /^[a-zA-Z0-9_\-.,]*$/
                    maxLength: 1000
                  image:
                    type: string
                    format: byte
                    pattern: /^[a-zA-Z0-9_\-]*$/
                    description: Base64-encoded image which needs to be scanned by the user with an Authenticator app
    delete:
      tags:
        - auth
        - 2fa
      summary: Disable 2fa
      operationId: disable2fa
      security:
        - cookieAccessToken: []
      parameters:
        - name: code
          in: query
          description: The code generated by the Authenticator app or one of the backup codes
          required: true
          schema:
            type: string
            pattern: /^([0-9]{6}|[a-zA-Z0-9_-]{10})$/
            maxLength: 10
            minLength: 6
      responses:
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "200":
          description: 2fa disabled
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResponseBody"
  /auth/2fa/verify:
    post:
      tags:
        - auth
        - 2fa
      summary: Verify 2fa code (initial or login verification)
      operationId: verify2fa
      security:
        - cookieAccessToken: []
        - cookie2faTempToken: []
      parameters:
        - name: code
          in: query
          description: The code generated by the Authenticator app or one of the backup codes
          required: true
          schema:
            type: string
            pattern: /^([0-9]{6}|[a-zA-Z0-9_-]{10})$/
            maxLength: 10
            minLength: 6
        - name: remember
          in: query
          description: If true, 2fa will not be required on login for 30 days, else will be required on every login
          schema:
            type: boolean
      responses:
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "201":
          description: 2fa is now fully enabled
          content:
            application/json:
              schema:
                additionalProperties: false
                type: object
                required:
                  - status
                  - message
                  - backupCodes
                properties:
                  status:
                    type: integer
                    format: int32
                    enum:
                      - 200
                    description: HTTP success status code
                  message:
                    type: string
                    pattern: /^[a-zA-Z0-9_\-.,]*$/
                    maxLength: 1000
                  backupCodes:
                    description: The backup codes which can be used instead of the regular OTP. Each code is single-use.
                    type: array
                    items:
                      additionalProperties: false
                      type: object
                      required:
                        - id
                        - active
                      properties:
                        id:
                          type: string
                          pattern: /^[a-zA-Z0-9_-]{10}$/
                          maxLength: 10
                        active:
                          type: boolean
                    minItems: 8
                    maxItems: 8
        "200":
          description: Full authentication successful
          content:
            application/json:
              schema:
                additionalProperties: false
                type: object
                properties:
                  status:
                    type: integer
                    format: int32
                    enum:
                      - 200
                    description: HTTP success status code
                  message:
                    type: string
                    pattern: /^[a-zA-Z0-9_\-.,]*$/
                    maxLength: 1000
                  user:
                    $ref: "#/components/schemas/User"
  /notes:
    get:
      tags:
        - notes
      summary: Get all the user's notes
      operationId: allNotes
      security:
        - cookieAccessToken: []
      parameters:
        - name: collaborations
          in: query
          required: false
          schema:
            type: boolean
            description: Specifies whether the notes where the user is collaborating should be included
            default: true
        - name: skip
          in: query
          required: false
          schema:
            type: integer
            format: int32
            description: The number of notes to skip from the result
            default: 0
        - name: limit
          in: query
          required: false
          schema:
            type: integer
            format: int32
            description: The maximum number of notes to return
            default: 1000
        - name: archived
          in: query
          required: false
          schema:
            type: boolean
            description: Specifies whether the notes archived/not archived should be fetched; if undefined, all the notes are fetched
      responses:
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "200":
          description: Notes fetched
          content:
            application/json:
              schema:
                additionalProperties: false
                type: object
                required:
                  - status
                  - message
                  - notes
                properties:
                  status:
                    type: integer
                    format: int32
                    enum:
                      - 200
                    description: HTTP success status code
                  message:
                    type: string
                    pattern: /^[a-zA-Z0-9_\-.,]*$/
                    maxLength: 1000
                  notes:
                    type: array
                    maxItems: 1000
                    items:
                      $ref: "#/components/schemas/Note"
    post:
      tags:
        - notes
      summary: Add note
      operationId: addNote
      security:
        - cookieAccessToken: []
      responses:
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "201":
          description: Note created
          content:
            application/json:
              schema:
                additionalProperties: false
                type: object
                properties:
                  status:
                    type: integer
                    format: int32
                    enum:
                      - 201
                    description: HTTP success status code
                  message:
                    type: string
                    pattern: /^[a-zA-Z0-9_\-.,]*$/
                    maxLength: 1000
                  note:
                    $ref: "#/components/schemas/Note"
      requestBody:
        $ref: "#/components/requestBodies/AddOrUpdateNote"
  /notes/tags:
    get:
      tags:
        - notes
        - tags
      summary: Get the user's notes by a tag
      operationId: allNotesByTag
      security:
        - cookieAccessToken: []
      parameters:
        - name: tag
          in: query
          required: true
          schema:
            type: string
            description: The tag to search by
        - name: match
          in: query
          required: false
          schema:
            type: boolean
            description: If true, return the notes that contain that exact tag, else do a regexp match
      responses:
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "200":
          description: Notes fetched
          content:
            application/json:
              schema:
                additionalProperties: false
                type: object
                required:
                  - status
                  - message
                  - notes
                properties:
                  status:
                    type: integer
                    format: int32
                    enum:
                      - 200
                    description: HTTP success status code
                  message:
                    type: string
                    pattern: /^[a-zA-Z0-9_\-.,]*$/
                    maxLength: 1000
                  notes:
                    type: array
                    maxItems: 1000
                    items:
                      $ref: "#/components/schemas/Note"
  "/notes/{noteID}":
    get:
      tags:
        - notes
      summary: One user's note
      operationId: getOneNote
      security:
        - cookieAccessToken: []
      parameters:
        - name: noteID
          in: path
          description: ID of note to return
          required: true
          schema:
            type: string
            pattern: /^not[a-zA-Z0-9_-]{24}$/
            maxLength: 27
            minLength: 27
      responses:
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "200":
          description: Note fetched
          content:
            application/json:
              schema:
                additionalProperties: false
                type: object
                properties:
                  status:
                    type: integer
                    format: int32
                    enum:
                      - 200
                    description: HTTP status code
                  message:
                    type: string
                    pattern: /^[a-zA-Z0-9_\-.,]*$/
                    maxLength: 1000
                  note:
                    $ref: "#/components/schemas/Note"
    put:
      tags:
        - notes
      summary: Update note
      operationId: updateNote
      security:
        - cookieAccessToken: []
      parameters:
        - name: noteID
          in: path
          description: ID of note to update
          required: true
          schema:
            type: string
            pattern: /^not[a-zA-Z0-9_-]{24}$/
            maxLength: 27
            minLength: 27
      responses:
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "200":
          description: Note updated
          content:
            application/json:
              schema:
                additionalProperties: false
                type: object
                properties:
                  status:
                    type: integer
                    format: int32
                    enum:
                      - 200
                    description: HTTP success status code
                  message:
                    type: string
                    pattern: /^[a-zA-Z0-9_\-.,]*$/
                    maxLength: 1000
                  note:
                    $ref: "#/components/schemas/Note"
      requestBody:
        $ref: "#/components/requestBodies/AddOrUpdateNote"
    delete:
      tags:
        - notes
      summary: Delete note
      operationId: deleteNote
      security:
        - cookieAccessToken: []
      parameters:
        - name: noteID
          in: path
          description: ID of note to delete
          required: true
          schema:
            type: string
            pattern: /^not[a-zA-Z0-9_-]{24}$/
            maxLength: 27
            minLength: 27
      responses:
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "200":
          description: Note deleted
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResponseBody"
  "/notes/{noteID}/duplicate":
    post:
      tags:
        - notes
      summary: Duplicate a note
      operationId: duplicate
      security:
        - cookieAccessToken: []
      parameters:
        - name: noteID
          in: path
          description: ID of note to share
          required: true
          schema:
            type: string
            pattern: /^not[a-zA-Z0-9_-]{24}$/
            maxLength: 27
            minLength: 27
      responses:
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "200":
          description: Note duplicated
          content:
            application/json:
              schema:
                additionalProperties: false
                type: object
                properties:
                  status:
                    type: integer
                    format: int32
                    enum:
                      - 200
                    description: HTTP success status code
                  message:
                    type: string
                    pattern: /^[a-zA-Z0-9_\-.,]*$/
                    maxLength: 1000
                  note:
                    $ref: "#/components/schemas/Note"
  "/notes/{noteID}/share":
    post:
      tags:
        - notes
      summary: Get sharing URL for a note
      operationId: shareNote
      security:
        - cookieAccessToken: []
      parameters:
        - name: noteID
          in: path
          description: ID of note to share
          required: true
          schema:
            type: string
            pattern: /^not[a-zA-Z0-9_-]{24}$/
            maxLength: 27
            minLength: 27
        - name: active
          in: query
          description: Set the sharing URL state
          required: false
          schema:
            type: boolean
        - name: get_new
          in: query
          description: Create a new URL instead of retrieving the old one
          required: false
          schema:
            type: boolean
      responses:
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "200":
          description: Link fetched
          content:
            application/json:
              schema:
                additionalProperties: false
                type: object
                properties:
                  status:
                    type: integer
                    format: int32
                    enum:
                      - 200
                    description: HTTP success status code
                  message:
                    type: string
                    pattern: /^[a-zA-Z0-9_\-.,]*$/
                    maxLength: 1000
                  share:
                    type: object
                    additionalProperties: false
                    required:
                      - active
                      - code
                    properties:
                      active:
                        type: boolean
                        description: State of the sharing code
                      code:
                        type: string
                        pattern: /^shr[a-zA-Z0-9_-]{24}$/
                        maxLength: 27
                        minLength: 27
                        description: Sharing code
  "/notes/{noteID}/share/collaborators":
    post:
      tags:
        - notes
        - collaborators
      summary: Add note collaborator
      operationId: addNoteCollaborator
      security:
        - cookieAccessToken: []
      parameters:
        - name: noteID
          in: path
          description: ID of note to add collab to
          required: true
          schema:
            type: string
            pattern: /^not[a-zA-Z0-9_-]{24}$/
            maxLength: 27
            minLength: 27
      responses:
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "200":
          description: Collaborator added
          content:
            application/json:
              schema:
                additionalProperties: false
                type: object
                properties:
                  status:
                    type: integer
                    format: int32
                    enum:
                      - 200
                    description: HTTP success status code
                  message:
                    type: string
                    pattern: /^[a-zA-Z0-9_\-.,]*$/
                    maxLength: 1000
                  collaborator:
                    type: object
                    properties:
                      roles:
                        type: array
                        items:
                          type: string
                          enum:
                            - primary_collaborator
                            - secondary_collaborator
                            - observer
                      subject:
                        type: object
                        additionalProperties: false
                        properties:
                          id:
                            type: string
                            pattern: /^usr[a-zA-Z0-9_-]{24}$/
                            maxLength: 27
                            minLength: 27
                          username:
                            type: string
                            pattern: /^[a-zA-Z0-9_-]{4,20}$/
                            maxLength: 20
                            minLength: 4
                          email:
                            type: string
                            format: email
                            maxLength: 254
                            minLength: 3
      requestBody:
        $ref: "#/components/requestBodies/AddCollaborator"
    delete:
      tags:
        - notes
        - collaborators
      summary: Delete self as a note collaborator
      description: Operation is forbidden for the note owner
      operationId: deleteNoteSelfCollaborator
      security:
        - cookieAccessToken: []
      parameters:
        - name: noteID
          in: path
          description: ID of note to delete self as collab from
          required: true
          schema:
            type: string
            pattern: /^not[a-zA-Z0-9_-]{24}$/
            maxLength: 27
            minLength: 27
      responses:
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "200":
          description: Self as collaborator deleted
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResponseBody"
  "/notes/{noteID}/share/collaborators/{collaboratorID}":
    delete:
      tags:
        - notes
        - collaborators
      summary: Delete note collaborator
      operationId: deleteNoteCollaborator
      security:
        - cookieAccessToken: []
      parameters:
        - name: noteID
          in: path
          description: ID of note to delete collab from
          required: true
          schema:
            type: string
            pattern: /^not[a-zA-Z0-9_-]{24}$/
            maxLength: 27
            minLength: 27
        - name: collaboratorID
          in: path
          description: ID of the collaborator to delete
          required: true
          schema:
            type: string
            pattern: /^usr[a-zA-Z0-9_-]{24}$/
            maxLength: 27
            minLength: 27
      responses:
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "200":
          description: Collaborator deleted
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResponseBody"
  "/notes/{noteID}/tags":
    post:
      tags:
        - notes
        - tags
      summary: Add tags
      operationId: addTags
      security:
        - cookieAccessToken: []
      parameters:
        - name: noteID
          in: path
          description: ID of a note to add tags to
          required: true
          schema:
            type: string
            pattern: /^not[a-zA-Z0-9_-]{24}$/
            maxLength: 27
            minLength: 27
        - name: tag
          in: query
          description: Tags to add to the note, separated with commas
          schema:
            type: string
            pattern: /^[ -~]{1,400}$/
            maxLength: 400
            minLength: 1
      responses:
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "200":
          description: Tags added
          content:
            application/json:
              schema:
                additionalProperties: false
                type: object
                properties:
                  status:
                    type: integer
                    format: int32
                    enum:
                      - 200
                    description: HTTP success status code
                  message:
                    type: string
                    pattern: /^[a-zA-Z0-9_\-.,]*$/
                    maxLength: 1000
                  tags:
                    type: array
                    maxItems: 20
                    items:
                      $ref: "#/components/schemas/Tag"
    delete:
      tags:
        - notes
        - tags
      summary: Delete tags
      operationId: deleteTags
      security:
        - cookieAccessToken: []
      parameters:
        - name: noteID
          in: path
          description: ID of a note to delete tags from
          required: true
          schema:
            type: string
            pattern: /^not[a-zA-Z0-9_-]{24}$/
            maxLength: 27
            minLength: 27
        - name: tag
          in: query
          description: Tags to delete from the note, separated with commas
          schema:
            type: string
            pattern: /^.*$/
            maxLength: 1000
            minLength: 0
      responses:
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "200":
          description: Tags deleted
          content:
            application/json:
              schema:
                additionalProperties: false
                type: object
                properties:
                  status:
                    type: integer
                    format: int32
                    enum:
                      - 200
                    description: HTTP success status code
                  message:
                    type: string
                    pattern: /^[a-zA-Z0-9_\-.,]*$/
                    maxLength: 1000
                  tags:
                    type: array
                    maxItems: 20
                    items:
                      $ref: "#/components/schemas/Tag"
  "/notes/{noteID}/move":
    post:
      tags:
        - notes
        - notepads
      summary: Move a note between notepads and the user's personal notes.
      description: Only the owner of the notepad can move a note from the notepad to the personal notes.
                   A user loses ownership of the note when moving it to a not-owned notepad.
      operationId: moveNote
      security:
        - cookieAccessToken: []
      parameters:
        - name: noteID
          in: path
          description: ID of a note to move
          required: true
          schema:
            type: string
            pattern: /^not[a-zA-Z0-9_-]{24}$/
            maxLength: 27
            minLength: 27
        - name: to
          in: query
          required: true
          description: The notepadID where the note will be moved, or 'default' if moving it to the personal notes.
          schema:
            type: string
            pattern: /^(npd[a-zA-Z0-9_-]{24}|default)$/
            maxLength: 27
            minLength: 7
      responses:
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "200":
          description: Note moved
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResponseBody"
  "/notes/{noteID}/attachments/image":
    post:
      tags:
        - notes
        - attachments
      summary: Add image attachment
      operationId: addImageAttachment
      security:
        - cookieAccessToken: []
      parameters:
        - name: noteID
          in: path
          description: ID of note to add attachment to
          required: true
          schema:
            type: string
            pattern: /^not[a-zA-Z0-9_-]{24}$/
            maxLength: 27
            minLength: 27
      responses:
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "201":
          description: Attachment added
          content:
            application/json:
              schema:
                additionalProperties: false
                type: object
                properties:
                  status:
                    type: integer
                    format: int32
                    enum:
                      - 201
                    description: HTTP success status code
                  message:
                    type: string
                    pattern: /^[a-zA-Z0-9_\-.,]*$/
                    maxLength: 1000
                  attachment:
                    $ref: "#/components/schemas/Attachment"
      requestBody:
        $ref: "#/components/requestBodies/AddImageAttachment"
  "/notes/{noteID}/attachments/audio":
    post:
      tags:
        - notes
        - attachments
      summary: Add audio attachment
      operationId: addAudioAttachment
      security:
        - cookieAccessToken: []
      parameters:
        - name: noteID
          in: path
          description: ID of note to add attachment to
          required: true
          schema:
            type: string
            pattern: /^not[a-zA-Z0-9_-]{24}$/
            maxLength: 27
            minLength: 27
      responses:
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "201":
          description: Attachment added
          content:
            application/json:
              schema:
                additionalProperties: false
                type: object
                properties:
                  status:
                    type: integer
                    format: int32
                    enum:
                      - 201
                    description: HTTP success status code
                  message:
                    type: string
                    pattern: /^[a-zA-Z0-9_\-.,]*$/
                    maxLength: 1000
                  attachment:
                    $ref: "#/components/schemas/Attachment"
      requestBody:
        $ref: "#/components/requestBodies/AddAudioAttachment"
  "/notes/{noteID}/attachments/{attachmentID}":
    put:
      tags:
        - notes
        - attachments
      summary: Update attachment title and description
      operationId: updateAttachment
      security:
        - cookieAccessToken: []
      parameters:
        - name: noteID
          in: path
          description: ID of note to update attachment from
          required: true
          schema:
            type: string
            pattern: /^not[a-zA-Z0-9_-]{24}$/
            maxLength: 27
            minLength: 27
        - name: attachmentID
          in: path
          description: ID of attachment to update
          required: true
          schema:
            type: string
            pattern: /^att[a-zA-Z0-9_-]{24}$/
            maxLength: 27
            minLength: 27
      responses:
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "200":
          description: Attachment edited
          content:
            application/json:
              schema:
                additionalProperties: false
                type: object
                properties:
                  status:
                    type: integer
                    format: int32
                    enum:
                      - 200
                    description: HTTP success status code
                  message:
                    type: string
                    pattern: /^[a-zA-Z0-9_\-.,]*$/
                    maxLength: 1000
                  attachment:
                    $ref: "#/components/schemas/Attachment"
      requestBody:
        $ref: "#/components/requestBodies/UpdateAttachment"
    delete:
      tags:
        - notes
        - attachments
      summary: Delete attachment
      operationId: deleteAttachment
      security:
        - cookieAccessToken: []
      parameters:
        - name: noteID
          in: path
          description: ID of note to delete attachment from
          required: true
          schema:
            type: string
            pattern: /^not[a-zA-Z0-9_-]{24}$/
            maxLength: 27
            minLength: 27
        - name: attachmentID
          in: path
          description: ID of attachment to delete
          required: true
          schema:
            type: string
            pattern: /^att[a-zA-Z0-9_-]{24}$/
            maxLength: 27
            minLength: 27
      responses:
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "200":
          description: Attachment deleted
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResponseBody"
  "/notes/{noteID}/comments":
    get:
      tags:
        - notes
        - comments
      summary: Get all comments of a note
      operationId: getAllComments
      security:
        - cookieAccessToken: []
      parameters:
        - name: noteID
          in: path
          description: ID of note to get comments from
          required: true
          schema:
            type: string
            pattern: /^not[a-zA-Z0-9_-]{24}$/
            maxLength: 27
            minLength: 27
      responses:
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "200":
          description: Comments fetched
          content:
            application/json:
              schema:
                additionalProperties: false
                type: object
                properties:
                  status:
                    type: integer
                    format: int32
                    enum:
                      - 200
                    description: HTTP success status code
                  message:
                    type: string
                    pattern: /^[a-zA-Z0-9_\-.,]*$/
                    maxLength: 1000
                  comments:
                    type: object
                    additionalProperties: false
                    properties:
                      enabled:
                        type: boolean
                      items:
                        type: array
                        items:
                          $ref: "#/components/schemas/Comment"
    post:
      tags:
        - notes
        - comments
      summary: Add a comment to note
      operationId: addComment
      security:
        - cookieAccessToken: []
      parameters:
        - name: noteID
          in: path
          description: ID of note to add comment to
          required: true
          schema:
            type: string
            pattern: /^not[a-zA-Z0-9_-]{24}$/
            maxLength: 27
            minLength: 27
      responses:
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "200":
          description: Comment added
          content:
            application/json:
              schema:
                additionalProperties: false
                type: object
                properties:
                  status:
                    type: integer
                    format: int32
                    enum:
                      - 200
                    description: HTTP success status code
                  message:
                    type: string
                    pattern: /^[a-zA-Z0-9_\-.,]*$/
                    maxLength: 1000
                  comment:
                    $ref: "#/components/schemas/Comment"
      requestBody:
        $ref: "#/components/requestBodies/AddOrUpdateComment"
  "/notes/{noteID}/comments/{commentID}":
    get:
      tags:
        - notes
        - comments
      summary: Get a comment
      operationId: getComment
      security:
        - cookieAccessToken: []
      parameters:
        - name: noteID
          in: path
          description: ID of note to get comment from
          required: true
          schema:
            type: string
            pattern: /^not[a-zA-Z0-9_-]{24}$/
            maxLength: 27
            minLength: 27
        - name: commentID
          in: path
          description: ID of comment to get
          required: true
          schema:
            type: string
            pattern: /^com[a-zA-Z0-9_-]{32}$/
            maxLength: 35
            minLength: 35
      responses:
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "200":
          description: Comment fetched
          content:
            application/json:
              schema:
                additionalProperties: false
                type: object
                properties:
                  status:
                    type: integer
                    format: int32
                    enum:
                      - 200
                    description: HTTP success status code
                  message:
                    type: string
                    pattern: /^[a-zA-Z0-9_\-.,]*$/
                    maxLength: 1000
                  comment:
                    $ref: "#/components/schemas/Comment"
    put:
      tags:
        - notes
        - comments
      summary: Update a comment
      operationId: updateComment
      security:
        - cookieAccessToken: []
      parameters:
        - name: noteID
          in: path
          description: ID of note to update comment from
          required: true
          schema:
            type: string
            pattern: /^not[a-zA-Z0-9_-]{24}$/
            maxLength: 27
            minLength: 27
        - name: commentID
          in: path
          description: ID of comment to update
          required: true
          schema:
            type: string
            pattern: /^com[a-zA-Z0-9_-]{32}$/
            maxLength: 35
            minLength: 35
      responses:
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "200":
          description: Comment updated
          content:
            application/json:
              schema:
                additionalProperties: false
                type: object
                properties:
                  status:
                    type: integer
                    format: int32
                    enum:
                      - 200
                    description: HTTP success status code
                  message:
                    type: string
                    pattern: /^[a-zA-Z0-9_\-.,]*$/
                    maxLength: 1000
                  comment:
                    $ref: "#/components/schemas/Comment"
      requestBody:
        $ref: "#/components/requestBodies/AddOrUpdateComment"
    delete:
      tags:
        - notes
        - comments
      summary: Delete a comment
      operationId: deleteComment
      security:
        - cookieAccessToken: []
      parameters:
        - name: noteID
          in: path
          description: ID of note to delete comment from
          required: true
          schema:
            type: string
            pattern: /^not[a-zA-Z0-9_-]{24}$/
            maxLength: 27
            minLength: 27
        - name: commentID
          in: path
          description: ID of comment to delete
          required: true
          schema:
            type: string
            pattern: /^com[a-zA-Z0-9_-]{32}$/
            maxLength: 35
            minLength: 35
      responses:
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "200":
          description: Comment deleted
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResponseBody"
  "/notes/{noteID}/comments/state":
    post:
      tags:
        - notes
        - comments
      summary: Update the comments section state
      operationId: updateCommentsSection
      security:
        - cookieAccessToken: []
      parameters:
        - name: noteID
          in: path
          description: ID of note whose comments section will be updated
          required: true
          schema:
            type: string
            pattern: /^not[a-zA-Z0-9_-]{24}$/
            maxLength: 27
            minLength: 27
        - name: enabled
          in: query
          description: Set the comments section state
          required: true
          schema:
            type: boolean
      responses:
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "200":
          description: State updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResponseBody"
  "/notepads":
    get:
      tags:
        - notepads
      summary: Get all the user's notepads
      operationId: allNotepads
      security:
        - cookieAccessToken: []
      parameters:
        - name: collaborations
          in: query
          required: false
          schema:
            type: boolean
            description: Specifies whether the notepads where the user is collaborating should be included
            default: true
        - name: skip
          in: query
          required: false
          schema:
            type: integer
            format: int32
            description: The number of notepads to skip from the result
            default: 0
        - name: limit
          in: query
          required: false
          schema:
            type: integer
            format: int32
            description: The maximum number of notepads to return
            default: 1000
        - name: include_notes
          in: query
          required: false
          schema:
            default: true
            type: boolean
            description: Specifies whether the notes inside the notepad should be returned as well
      responses:
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "200":
          description: Notepads fetched
          content:
            application/json:
              schema:
                additionalProperties: false
                type: object
                required:
                  - status
                  - message
                  - notepads
                properties:
                  status:
                    type: integer
                    format: int32
                    enum:
                      - 200
                    description: HTTP success status code
                  message:
                    type: string
                    pattern: /^[a-zA-Z0-9_\-.,]*$/
                    maxLength: 1000
                  notepads:
                    type: array
                    maxItems: 100
                    items:
                      $ref: "#/components/schemas/Notepad"
    post:
      tags:
        - notepads
      summary: Add an empty notepad
      operationId: addNotepad
      security:
        - cookieAccessToken: []
      responses:
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "201":
          description: Notepad created
          content:
            application/json:
              schema:
                additionalProperties: false
                type: object
                properties:
                  status:
                    type: integer
                    format: int32
                    enum:
                      - 201
                    description: HTTP success status code
                  message:
                    type: string
                    pattern: /^[a-zA-Z0-9_\-.,]*$/
                    maxLength: 1000
                  notepad:
                    $ref: "#/components/schemas/Notepad"
      requestBody:
        $ref: "#/components/requestBodies/AddOrUpdateNotepad"
  "/notepads/{notepadID}":
    get:
      tags:
        - notepads
      summary: Get one of the user's notepads
      operationId: getOneNotepad
      security:
        - cookieAccessToken: []
      parameters:
        - name: notepadID
          in: path
          required: true
          schema:
            type: string
            pattern: /^npd[a-zA-Z0-9_-]{24}$/
            maxLength: 27
            minLength: 27
        - name: include_notes
          in: query
          required: false
          schema:
            default: true
            type: boolean
            description: Specifies whether the notes inside the notepad should be returned as well
      responses:
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "200":
          description: Notepad fetched
          content:
            application/json:
              schema:
                additionalProperties: false
                type: object
                required:
                  - status
                  - message
                  - notepad
                properties:
                  status:
                    type: integer
                    format: int32
                    enum:
                      - 200
                    description: HTTP success status code
                  message:
                    type: string
                    pattern: /^[a-zA-Z0-9_\-.,]*$/
                    maxLength: 1000
                  notepad:
                    $ref: "#/components/schemas/Notepad"
    put:
      tags:
        - notepads
      summary: Update an existing notepad
      operationId: updateNotepad
      security:
        - cookieAccessToken: []
      parameters:
        - name: notepadID
          in: path
          required: true
          schema:
            type: string
            pattern: /^npd[a-zA-Z0-9_-]{24}$/
            maxLength: 27
            minLength: 27
      responses:
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "200":
          description: Notepad updated; notes are not included in the response
          content:
            application/json:
              schema:
                additionalProperties: false
                type: object
                properties:
                  status:
                    type: integer
                    format: int32
                    enum:
                      - 200
                    description: HTTP success status code
                  message:
                    type: string
                    pattern: /^[a-zA-Z0-9_\-.,]*$/
                    maxLength: 1000
                  notepad:
                    $ref: "#/components/schemas/Notepad"
      requestBody:
        $ref: "#/components/requestBodies/AddOrUpdateNotepad"
    delete:
      tags:
        - notepads
      summary: Delete an existing notepad
      operationId: deleteNotepad
      security:
        - cookieAccessToken: []
      parameters:
        - name: notepadID
          in: path
          required: true
          schema:
            type: string
            pattern: /^npd[a-zA-Z0-9_-]{24}$/
            maxLength: 27
            minLength: 27
      responses:
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "200":
          description: Notepad deleted
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResponseBody"
  "/notepads/{notepadID}/share":
    post:
      tags:
        - notepads
      summary: Get sharing URL for a notepad
      operationId: shareNotepad
      security:
        - cookieAccessToken: []
      parameters:
        - name: notepadID
          in: path
          description: ID of notepad to share
          required: true
          schema:
            type: string
            pattern: /^npd[a-zA-Z0-9_-]{24}$/
            maxLength: 27
            minLength: 27
        - name: active
          in: query
          description: Set the sharing URL state
          required: false
          schema:
            type: boolean
        - name: get_new
          in: query
          description: Create a new URL instead of retrieving the old one
          required: false
          schema:
            type: boolean
      responses:
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "200":
          description: Link fetched
          content:
            application/json:
              schema:
                additionalProperties: false
                type: object
                properties:
                  status:
                    type: integer
                    format: int32
                    enum:
                      - 200
                    description: HTTP success status code
                  message:
                    type: string
                    pattern: /^[a-zA-Z0-9_\-.,]*$/
                    maxLength: 1000
                  share:
                    type: object
                    additionalProperties: false
                    required:
                      - active
                      - code
                    properties:
                      active:
                        type: boolean
                        description: State of the sharing code
                      code:
                        type: string
                        pattern: /^shr[a-zA-Z0-9_-]{24}$/
                        maxLength: 27
                        minLength: 27
                        description: Sharing code
  "/notepads/{notepadID}/share/collaborators":
    post:
      tags:
        - notepads
        - collaborators
      summary: Add notepad collaborator
      operationId: addNotepadCollaborator
      security:
        - cookieAccessToken: []
      parameters:
        - name: notepadID
          in: path
          description: ID of notepad to add collab to
          required: true
          schema:
            type: string
            pattern: /^npd[a-zA-Z0-9_-]{24}$/
            maxLength: 27
            minLength: 27
      responses:
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "200":
          description: Collaborator added
          content:
            application/json:
              schema:
                additionalProperties: false
                type: object
                properties:
                  status:
                    type: integer
                    format: int32
                    enum:
                      - 200
                    description: HTTP success status code
                  message:
                    type: string
                    pattern: /^[a-zA-Z0-9_\-.,]*$/
                    maxLength: 1000
                  collaborator:
                    type: object
                    properties:
                      roles:
                        type: array
                        items:
                          type: string
                          enum:
                            - primary_collaborator
                            - secondary_collaborator
                            - observer
                      subject:
                        type: object
                        additionalProperties: false
                        properties:
                          id:
                            type: string
                            pattern: /^usr[a-zA-Z0-9_-]{24}$/
                            maxLength: 27
                            minLength: 27
                          username:
                            type: string
                            pattern: /^[a-zA-Z0-9_-]{4,20}$/
                            maxLength: 20
                            minLength: 4
                          email:
                            type: string
                            format: email
                            maxLength: 254
                            minLength: 3
      requestBody:
        $ref: "#/components/requestBodies/AddCollaborator"
    delete:
      tags:
        - notepads
        - collaborators
      summary: Delete self as a notepad collaborator
      description: Operation is forbidden for the notepad owner
      operationId: deleteNotepadSelfCollaborator
      security:
        - cookieAccessToken: []
      parameters:
        - name: notepadID
          in: path
          description: ID of notepad to delete self as collab from
          required: true
          schema:
            type: string
            pattern: /^npd[a-zA-Z0-9_-]{24}$/
            maxLength: 27
            minLength: 27
      responses:
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "200":
          description: Self as collaborator deleted
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResponseBody"
  "/notepads/{notepadID}/share/collaborators/{collaboratorID}":
    delete:
      tags:
        - notepads
        - collaborators
      summary: Delete notepad collaborator
      operationId: deleteNotepadCollaborator
      security:
        - cookieAccessToken: []
      parameters:
        - name: notepadID
          in: path
          description: ID of notepad to delete collab from
          required: true
          schema:
            type: string
            pattern: /^npd[a-zA-Z0-9_-]{24}$/
            maxLength: 27
            minLength: 27
        - name: collaboratorID
          in: path
          description: ID of the collaborator to delete
          required: true
          schema:
            type: string
            pattern: /^usr[a-zA-Z0-9_-]{24}$/
            maxLength: 27
            minLength: 27
      responses:
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "200":
          description: Collaborator deleted
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResponseBody"
  "/notepads/{notepadID}/notes":
    post:
      tags:
        - notepads
        - notes
      summary: Create a new note and add it to a notepad
      operationId: addNoteToNotepad
      security:
        - cookieAccessToken: []
      parameters:
        - name: notepadID
          in: path
          description: ID of notepad to delete collab from
          required: true
          schema:
            type: string
            pattern: /^npd[a-zA-Z0-9_-]{24}$/
            maxLength: 27
            minLength: 27
      responses:
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "201":
          description: Note created and added to the notepad
          content:
            application/json:
              schema:
                additionalProperties: false
                type: object
                properties:
                  status:
                    type: integer
                    format: int32
                    enum:
                      - 201
                    description: HTTP success status code
                  message:
                    type: string
                    pattern: /^[a-zA-Z0-9_\-.,]*$/
                    maxLength: 1000
                  note:
                    $ref: "#/components/schemas/Note"
      requestBody:
        $ref: "#/components/requestBodies/AddOrUpdateNote"
  "/shared/note/{shareCode}":
    get:
      tags:
        - notes
      summary: Fetch one note shared using the code
      operationId: getSharedNote
      security:
        - cookieAccessToken: []
      parameters:
        - name: shareCode
          in: path
          description: Sharing code of the note
          required: true
          schema:
            type: string
            pattern: /^shr[a-zA-Z0-9_-]{24}$/
            maxLength: 27
            minLength: 27
      responses:
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "200":
          description: Note fetched
          content:
            application/json:
              schema:
                additionalProperties: false
                type: object
                properties:
                  status:
                    type: integer
                    format: int32
                    enum:
                      - 200
                    description: HTTP status code
                  message:
                    type: string
                    pattern: /^[a-zA-Z0-9_\-.,]*$/
                    maxLength: 1000
                  note:
                    $ref: "#/components/schemas/Note"
  "/shared/notepad/{shareCode}":
    get:
      tags:
        - notepads
      summary: Fetch one notepad shared using the code, including the notes inside
      operationId: getSharedNotepad
      security:
        - cookieAccessToken: []
      parameters:
        - name: shareCode
          in: path
          description: Sharing code of the notepad
          required: true
          schema:
            type: string
            pattern: /^shr[a-zA-Z0-9_-]{24}$/
            maxLength: 27
            minLength: 27
      responses:
        default:
          description: Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "200":
          description: Notepad fetched
          content:
            application/json:
              schema:
                additionalProperties: false
                type: object
                properties:
                  status:
                    type: integer
                    format: int32
                    enum:
                      - 200
                    description: HTTP status code
                  message:
                    type: string
                    pattern: /^[a-zA-Z0-9_\-.,]*$/
                    maxLength: 1000
                  notepad:
                    $ref: "#/components/schemas/Notepad"
externalDocs:
  description: Find out more about Swagger
  url: "http://swagger.io"
components:
  schemas:
    Attachment:
      additionalProperties: false
      type: object
      properties:
        id:
          type: string
          pattern: /^att[a-zA-Z0-9_-]{24}$/
          maxLength: 27
          minLength: 27
        url:
          type: string
          description: A valid URL of an image
          pattern: /^[a-zA-Z0-9_\-.:\/\\?!=+\|]$/
          maxLength: 300
          minLength: 5
        title:
          type: string
          maxLength: 32
        description:
          type: string
          maxLength: 256
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
    Comment:
      additionalProperties: false
      type: object
      properties:
        id:
          type: string
          pattern: /^att[a-zA-Z0-9_-]{24}$/
          maxLength: 27
          minLength: 27
        subject:
          type: object
          additionalProperties: false
          properties:
            id:
              type: string
              pattern: /^usr[a-zA-Z0-9_-]{24}$/
              maxLength: 27
              minLength: 27
            username:
              type: string
              pattern: /^[a-zA-Z0-9_-]{4,20}$/
              maxLength: 20
              minLength: 4
            email:
              type: string
              format: email
              maxLength: 254
              minLength: 3
        text:
          type: string
          maxLength: 120
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
    Tag:
      type: string
      pattern: /^[ -~]{1,20}$/
      maxLength: 20
      minLength: 1
    Note:
      additionalProperties: false
      type: object
      required:
        - id
        - owner
        - createdAt
        - updatedAt
      properties:
        id:
          type: string
          pattern: /^not[a-zA-Z0-9_-]{24}$/
          maxLength: 27
          minLength: 27
        title:
          type: string
          maxLength: 100
        content:
          type: string
          maxLength: 10000
        owner:
          type: object
          additionalProperties: false
          properties:
            id:
              type: string
              pattern: /^usr[a-zA-Z0-9_-]{24}$/
              maxLength: 27
              minLength: 27
            username:
              type: string
              pattern: /^[a-zA-Z0-9_-]{4,20}$/
              maxLength: 20
              minLength: 4
            email:
              type: string
              format: email
              maxLength: 254
              minLength: 3
        collaborators:
          type: array
          maxItems: 10
          items:
            type: object
            additionalProperties: false
            required:
                - role
                - subject
            properties:
              roles:
                type: array
                items:
                  type: string
                  enum:
                    - primary_collaborator
                    - secondary_collaborator
                    - observer
              subject:
                type: object
                additionalProperties: false
                properties:
                  id:
                    type: string
                    pattern: /^usr[a-zA-Z0-9_-]{24}$/
                    maxLength: 27
                    minLength: 27
                  username:
                    type: string
                    pattern: /^[a-zA-Z0-9_-]{4,20}$/
                    maxLength: 20
                    minLength: 4
                  email:
                    type: string
                    format: email
                    maxLength: 254
                    minLength: 3
        attachments:
          type: array
          maxItems: 10
          items:
            $ref: "#/components/schemas/Attachment"
        tags:
          type: array
          maxItems: 20
          items:
            $ref: "#/components/schemas/Tag"
        share:
          additionalProperties: false
          type: object
          required:
            - active
          properties:
            active:
              type: boolean
            code:
              type: string
              pattern: /^shr[a-zA-Z0-9_-]{24}$/
              maxLength: 27
              minLength: 27
        archived:
          type: boolean
        fixed:
          type: boolean
        color:
          type: string
          enum:
            - "#ced4da"
            - "#edafb8"
            - "#d6efff"
            - "#fbf7ae"
            - "#cce7cf"
            - "#e9dff7"
            - "#fdeac4"
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
        notepadID:
          type: string
          default: ''
          pattern: /(^npd[a-zA-Z0-9_-]{24}$)|(^$)/
          maxLength: 27
          minLength: 0
    Notepad:
      additionalProperties: false
      type: object
      required:
        - id
        - createdAt
        - updatedAt
        - owner
      properties:
        id:
          type: string
          pattern: /^not[a-zA-Z0-9_-]{24}$/
          maxLength: 27
          minLength: 27
        title:
          type: string
          maxLength: 100
        owner:
          type: object
          additionalProperties: false
          properties:
            id:
              type: string
              pattern: /^usr[a-zA-Z0-9_-]{24}$/
              maxLength: 27
              minLength: 27
            username:
              type: string
              pattern: /^[a-zA-Z0-9_-]{4,20}$/
              maxLength: 20
              minLength: 4
            email:
              type: string
              format: email
              maxLength: 254
              minLength: 3
        collaborators:
          type: array
          maxItems: 10
          items:
            type: object
            additionalProperties: false
            required:
                - role
                - subject
            properties:
              roles:
                type: array
                items:
                  type: string
                  enum:
                    - primary_collaborator
                    - secondary_collaborator
                    - observer
              subject:
                type: object
                additionalProperties: false
                properties:
                  id:
                    type: string
                    pattern: /^usr[a-zA-Z0-9_-]{24}$/
                    maxLength: 27
                    minLength: 27
                  username:
                    type: string
                    pattern: /^[a-zA-Z0-9_-]{4,20}$/
                    maxLength: 20
                    minLength: 4
                  email:
                    type: string
                    format: email
                    maxLength: 254
                    minLength: 3
        share:
          additionalProperties: false
          type: object
          required:
            - active
          properties:
            active:
              type: boolean
            code:
              type: string
              pattern: /^shr[a-zA-Z0-9_-]{24}$/
              maxLength: 27
              minLength: 27
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
        notes:
          type: array
          maxItems: 1000
          items:
            $ref: "#/components/schemas/Note"
    ResponseBody:
      additionalProperties: false
      type: object
      required:
        - status
        - message
      properties:
        status:
          type: integer
          format: int32
          minimum: 200
          maximum: 299
          description: HTTP success status code
        message:
          type: string
          pattern: /^[a-zA-Z0-9_\-.,]*$/
          maxLength: 1000
    User:
      additionalProperties: false
      type: object
      required:
        - id
        - username
        - email
        - state
        - isOAuthUser
        - twoFactorAuth
      properties:
        id:
          type: string
          pattern: /^usr[a-zA-Z0-9_-]{24}$/
          maxLength: 27
          minLength: 27
        username:
          type: string
          pattern: /^[a-zA-Z0-9_-]{4,20}$/
          maxLength: 20
          minLength: 4
        email:
          type: string
          format: email
          maxLength: 254
          minLength: 3
        state:
          type: string
          enum:
              - unconfirmed
              - active
              - deleting
        isOAuthUser:
          type: boolean
        twoFactorAuth:
          additionalProperties: false
          type: object
          required:
            - active
            - nextCheck
          properties:
            active:
              type: boolean
            nextCheck:
              type: integer
              format: int64
              minimum: 0
              maximum: 9999999999
              description: 0 if 2fa is required at each login, otherwise a UNIX timestamp representing the next time for a 2fa check
    Error:
      additionalProperties: false
      type: object
      required:
        - status
        - message
      properties:
        status:
          type: integer
          format: int32
          minimum: 400
          maximum: 599
          description: HTTP error status code
        message:
          type: string
          pattern: /^[a-zA-Z0-9_\-.,]*$/
          maxLength: 200
          description: A brief summary of the error
  requestBodies:
    Login:
      content:
        application/x-www-form-urlencoded:
          schema:
            additionalProperties: false
            type: object
            required:
              - email
              - password
            properties:
              email:
                type: string
                maxLength: 254
                minLength: 3
                description: The user's email or username
              password:
                type: string
                format: password
                pattern: /^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[*.!@$%^&(){}[\]:;<>,.?/~_+\-=|\\]).{8,40}$/
                maxLength: 40
                minLength: 8
                description: The user's password
              g-recaptcha-response:
                type: string
                description: reCAPTCHA token used to verify the user's interaction; only used in the production environment
                pattern: /^.*$/
        application/json:
          schema:
            additionalProperties: false
            type: object
            required:
              - email
              - password
            properties:
              email:
                type: string
                maxLength: 254
                minLength: 3
                description: The user's email or username
              password:
                type: string
                format: password
                pattern: /^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[*.!@$%^&(){}[\]:;<>,.?/~_+\-=|\\]).{8,40}$/
                maxLength: 40
                minLength: 8
                description: The user's password
              g-recaptcha-response:
                type: string
                description: reCAPTCHA token used to verify the user's interaction; only used in the production environment
                pattern: /^.*$/
      description: The user's credentials required for authentication
      required: true
    Register:
      content:
        application/x-www-form-urlencoded:
          schema:
            additionalProperties: false
            type: object
            required:
              - username
              - email
              - password
              - confirm_password
            properties:
              username:
                type: string
                pattern: /^[a-zA-Z0-9_-]{4,20}$/
                maxLength: 20
                minLength: 4
                description: The chosen username
              email:
                type: string
                format: email
                maxLength: 254
                minLength: 3
                description: The user's email
              password:
                type: string
                format: password
                pattern: /^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[*.!@$%^&(){}[\]:;<>,.?/~_+\-=|\\]).{8,40}$/
                maxLength: 40
                minLength: 8
                description: The user's password
              confirm_password:
                type: string
                format: password
                pattern: /^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[*.!@$%^&(){}[\]:;<>,.?/~_+\-=|\\]).{8,40}$/
                maxLength: 40
                minLength: 8
                description: The user's password entered again
              g-recaptcha-response:
                type: string
                description: reCAPTCHA token used to verify the user's interaction; only used in the production environment
                pattern: /^.*$/
        application/json:
          schema:
            additionalProperties: false
            type: object
            required:
              - username
              - email
              - password
              - confirm_password
            properties:
              username:
                type: string
                pattern: /^[a-zA-Z0-9_-]{4,20}$/
                maxLength: 20
                minLength: 4
                description: The chosen username
              email:
                type: string
                pattern: /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/
                maxLength: 254
                minLength: 3
                description: The user's email
              password:
                type: string
                format: password
                pattern: /^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[*.!@$%^&(){}[\]:;<>,.?/~_+\-=|\\]).{8,40}$/
                maxLength: 40
                minLength: 8
                description: The user's password
              confirm_password:
                type: string
                format: password
                pattern: /^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[*.!@$%^&(){}[\]:;<>,.?/~_+\-=|\\]).{8,40}$/
                maxLength: 40
                minLength: 8
                description: The user's password entered again
              g-recaptcha-response:
                type: string
                description: reCAPTCHA token used to verify the user's interaction; only used in the production environment
                pattern: /^.*$/
      description: The user's info required for registration
    CheckCredentials:
      content:
        application/x-www-form-urlencoded:
          schema:
            additionalProperties: false
            type: object
            properties:
              username:
                type: string
                pattern: /^[a-zA-Z0-9_-]{4,20}$/
                maxLength: 20
                minLength: 4
                description: The username to be checked
              email:
                type: string
                format: email
                maxLength: 254
                minLength: 3
                description: The email to be checked
        application/json:
          schema:
            additionalProperties: false
            type: object
            properties:
              username:
                type: string
                pattern: /^[a-zA-Z0-9_-]{4,20}$/
                maxLength: 20
                minLength: 4
                description: The username to be checked
              email:
                type: string
                maxLength: 254
                minLength: 3
                description: The email to be checked
      description: The username and/or email to be checked if taken
    OldPassword:
      content:
        application/x-www-form-urlencoded:
          schema:
            additionalProperties: false
            type: object
            required:
              - old_password
            properties:
              old_password:
                type: string
                format: password
                pattern: /^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[*.!@$%^&(){}[\]:;<>,.?/~_+\-=|\\]).{8,40}$/
                maxLength: 40
                minLength: 8
                description: The user's password
        application/json:
          schema:
            additionalProperties: false
            type: object
            required:
              - old_password
            properties:
              old_password:
                type: string
                format: password
                pattern: /^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[*.!@$%^&(){}[\]:;<>,.?/~_+\-=|\\]).{8,40}$/
                maxLength: 40
                minLength: 8
                description: The user's password
      description: The user's old password required for changing it to a new one
    ForgotPassword:
      content:
        application/x-www-form-urlencoded:
          schema:
            additionalProperties: false
            type: object
            required:
              - email
            properties:
              email:
                type: string
                maxLength: 254
                description: The user's email or username
        application/json:
          schema:
            additionalProperties: false
            type: object
            required:
              - email
            properties:
              email:
                type: string
                maxLength: 254
                description: The user's email or username
      description: The user's current username or email address required for resetting the password when forgotten
      required: true
    NewPassword:
      content:
        application/x-www-form-urlencoded:
          schema:
            additionalProperties: false
            type: object
            required:
              - new_password
              - confirm_new_password
            properties:
              new_password:
                type: string
                format: password
                pattern: /^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[*.!@$%^&(){}[\]:;<>,.?/~_+\-=|\\]).{8,40}$/
                maxLength: 40
                minLength: 8
                description: The user's password
              confirm_new_password:
                type: string
                format: password
                pattern: /^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[*.!@$%^&(){}[\]:;<>,.?/~_+\-=|\\]).{8,40}$/
                maxLength: 40
                minLength: 8
                description: The user's password again
              g-recaptcha-response:
                type: string
                description: reCAPTCHA token used to verify the user's interaction; only used in the production environment
                pattern: /^.*$/
        application/json:
          schema:
            additionalProperties: false
            type: object
            required:
              - new_password
              - confirm_new_password
            properties:
              new_password:
                type: string
                format: password
                pattern: /^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[*.!@$%^&(){}[\]:;<>,.?/~_+\-=|\\]).{8,40}$/
                maxLength: 40
                minLength: 8
                description: The user's password
              confirm_new_password:
                type: string
                format: password
                pattern: /^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[*.!@$%^&(){}[\]:;<>,.?/~_+\-=|\\]).{8,40}$/
                maxLength: 40
                minLength: 8
                description: The user's password again
              g-recaptcha-response:
                type: string
                description: reCAPTCHA token used to verify the user's interaction; only used in the production environment
                pattern: /^.*$/
      description: The user's old password required for changing it to a new one
    AddOrUpdateNote:
      content:
        application/x-www-form-urlencoded:
          schema:
            additionalProperties: false
            type: object
            properties:
              title:
                type: string
                maxLength: 100
              content:
                type: string
                maxLength: 10000
              archived:
                type: boolean
              fixed:
                type: boolean
              color:
                type: string
                enum:
                  - "#ced4da"
                  - "#edafb8"
                  - "#d6efff"
                  - "#fbf7ae"
                  - "#cce7cf"
                  - "#e9dff7"
                  - "#fdeac4"
        application/json:
          schema:
            additionalProperties: false
            type: object
            properties:
              title:
                type: string
                maxLength: 100
              content:
                type: string
                maxLength: 10000
              archived:
                type: boolean
              fixed:
                type: boolean
              color:
                type: string
                enum:
                  - "#ced4da"
                  - "#edafb8"
                  - "#d6efff"
                  - "#fbf7ae"
                  - "#cce7cf"
                  - "#e9dff7"
                  - "#fdeac4"
    AddCollaborator:
      content:
        application/x-www-form-urlencoded:
          schema:
            additionalProperties: false
            type: object
            required:
              - user
              - type
            properties:
              user:
                type: string
                maxLength: 254
                minLength: 4
                description: Username or email of the collaborator
              type:
                type: string
                enum:
                  - viewer
                  - editor
        application/json:
          schema:
            additionalProperties: false
            type: object
            required:
              - user
              - type
            properties:
              user:
                type: string
                maxLength: 254
                minLength: 4
                description: Username or email of the collaborator
              type:
                type: string
                enum:
                  - viewer
                  - editor
    AddOrUpdateComment:
      content:
        application/x-www-form-urlencoded:
          schema:
            additionalProperties: false
            type: object
            required:
              - text
            properties:
              text:
                type: string
                maxLength: 120
                description: The text of the comment to be added or updated
        application/json:
          schema:
            additionalProperties: false
            type: object
            required:
              - text
            properties:
              text:
                type: string
                maxLength: 120
                description: The text of the comment to be added or updated
    AddOrUpdateNotepad:
      content:
        application/x-www-form-urlencoded:
          schema:
            additionalProperties: false
            type: object
            required:
              - text
            properties:
              text:
                type: string
                maxLength: 120
                description: The title of the notepad to be added or updated
        application/json:
          schema:
            additionalProperties: false
            type: object
            required:
              - text
            properties:
              text:
                type: string
                maxLength: 120
                description: The title of the notepad to be added or updated
    AddImageAttachment:
      content:
        multipart/formdata:
          schema:
            additionalProperties: false
            type: object
            required:
              - image
            properties:
              image:
                type: string
                format: binary
                description: Image file to be added as attachment
              title:
                type: string
                maxLength: 32
              description:
                type: string
                maxLength: 256
          encoding:
            image:
              contentType: image/jpeg, image/png
    AddAudioAttachment:
      content:
        multipart/formdata:
          schema:
            additionalProperties: false
            type: object
            required:
              - audio
            properties:
              audio:
                type: string
                format: binary
                description: Audio file to be added as attachment
              title:
                type: string
                maxLength: 32
              description:
                type: string
                maxLength: 256
          encoding:
            audio:
              contentType: audio/aac, audio/mpeg, audio/wav, audio/wave, audio/ogg, audio/webm, video/webm
    UpdateAttachment:
      content:
        application/x-www-form-urlencoded:
          schema:
            additionalProperties: false
            type: object
            properties:
              title:
                type: string
                maxLength: 32
              description:
                type: string
                maxLength: 256
        application/json:
          schema:
            additionalProperties: false
            type: object
            properties:
              title:
                type: string
                maxLength: 32
              description:
                type: string
                maxLength: 256
  securitySchemes:
    cookieAccessToken:
      type: apiKey
      description: JWT signed token used for authentication
      name: access_token
      in: cookie
    cookie2faTempToken:
      type: apiKey
      description: a temporary id used between the first step of the 2fa and the full authentication
      name: temp_token
      in: cookie